{% extends 'base.html' %}

{% block content %}

<div class="row">
    <div class="col-sm-6">
        <form autocomplete="off" action="{% url 'index' %}">
            {% csrf_token %}

            <div class="form-group">
                <h1><a href="{% url 'index' %}">Buscador Django</a></h1>
                {% comment %} <h4>[{{ city }} {% if country %} - {{ country }} {% endif %}]</h4> {% endcomment %}
            </div>

            <div class="form-grup">
                <input type="text" class="form-control" name="key"
                    placeholder="Digite um termo para busca (obrigatório)" required>
                <small id="keyHelp" class="form-text text-muted">
                    Exemplo: Mexican Foot, Bazilian Foot, Asian Food
                </small>
            </div>

            <div class="form-grup">
                <input type="text" class="form-control" name="loc" placeholder="Digite uma cidade para efetuar a busca (obrigatório)" required>
                <small id="keyHelp" class="form-text text-muted">
                    Exemplo: Vancouver, Madrid, Oslo
                </small>
            </div>

            <button type="submit" class="btn btn-primary">Buscar</button>

            {% if 'error' in items %}
                <h1>Nenhum estabelecimento encontrado em {{ city }}</h1>

            {% elif busca and items.businesses|length < 1 %} 
                <h1>Nada encontrado sobre o termo buscado</h1>

            {% elif city and items %}
                <h1>Resultado da busca</h1>
                
                <h4>{{ termo }} - {{ city }}</h4>

                {% for biz in items.businesses %}
                    <span class="text-info">
                        {{ biz.name}}, {{ city }}
                    </span>
                    <br />
                {% endfor %}

            {% endif %}

        </form>
    </div>

    {% if city and items|length > 1 %}

        {% include 'maps.html' %}

    {% endif %}

</div>

{% endblock %}